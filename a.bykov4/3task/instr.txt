(me)    touch file.txt
(me)    chmod 600 file.txt
(me)    make
(me)    ./main <- у нас все должно запуститься
        просим запустить другого пользователя <- у него не должны открыться файлы
(me)    chmod u+s main <- ставим бит s
(user)  ./main <- теперь другой юзер сможет открыть файл



На линуксе :

Эт я
"""
haruto@BRN-FXXC:/tmp/test_dir2$ touch secret.txt 
haruto@BRN-FXXC:/tmp/test_dir2$ chmod 600 secret.txt 
haruto@BRN-FXXC:/tmp/test_dir2$ ./main secret.txt
======= НАЧАЛЬНОЕ СОСТОЯНИЕ =======
Текущий реальный ID пользователя: 1000
Текущий эффективный ID пользователя: 1000

Проверка доступа к файлу: 'secret.txt'
Доступ к файлу разрешен!

======= КОНЕЧНОЕ СОСТОЯНИЕ =======
Текущий реальный ID пользователя: 1000
Текущий эффективный ID пользователя: 1000

Проверка доступа к файлу: 'secret.txt'
Доступ к файлу разрешен!

"""


А это созданный тестовый пользователь


haruto@BRN-FXXC:/tmp/test_dir2$ su - testuse
Пароль: 
testuse@BRN-FXXC:~$ cd /tmp/test_dir2
testuse@BRN-FXXC:/tmp/test_dir2$ ./main secret.txt
======= НАЧАЛЬНОЕ СОСТОЯНИЕ =======
Текущий реальный ID пользователя: 1002
Текущий эффективный ID пользователя: 1002

Проверка доступа к файлу: 'secret.txt'
Ошибка доступа к файлу: Permission denied

======= КОНЕЧНОЕ СОСТОЯНИЕ =======
Текущий реальный ID пользователя: 1002
Текущий эффективный ID пользователя: 1002

Проверка доступа к файлу: 'secret.txt'
Ошибка доступа к файлу: Permission denied



Такое будет если поставить от меня
sudo chown root main
и
sudo chmod u+s main 

haruto@BRN-FXXC:/tmp/test_dir2$ su - testuse
Пароль: 
testuse@BRN-FXXC:~$ cd /tmp/test_dir2
testuse@BRN-FXXC:/tmp/test_dir2$ ./main secret.txt 
======= НАЧАЛЬНОЕ СОСТОЯНИЕ =======
Текущий реальный ID пользователя: 1002
Текущий эффективный ID пользователя: 0

Проверка доступа к файлу: 'secret.txt'
Доступ к файлу разрешен!

>>> Синхронизация идентификаторов пользователя <<<
Идентификаторы синхронизированы!

======= КОНЕЧНОЕ СОСТОЯНИЕ =======
Текущий реальный ID пользователя: 1002
Текущий эффективный ID пользователя: 1002

Проверка доступа к файлу: 'secret.txt'
Ошибка доступа к файлу: Permission denied
